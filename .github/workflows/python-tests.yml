# 工作流程的名稱，會顯示在 GitHub Actions 頁面上
name: Python Unittest Workflow

# 控制工作流程觸發的時機
on:
  # 當有程式碼推送到 main 分支時觸發
  push:
    branches: [ main ]
  # 當有針對 main 分支的 Pull Request 時觸發
  pull_request:
    branches: [ main ]

# 定義工作流程中要執行的任務 (jobs)
jobs:
  # 我們定義一個名為 'test' 的任務
  test:
    # 指定任務運行的環境，這裡使用最新的 Ubuntu
    runs-on: ubuntu-latest

    # 任務執行的步驟 (steps)
    steps:
      # 步驟 1: 將 GitHub 儲存庫的程式碼下載到虛擬環境中
      - name: Check out repository code
        uses: actions/checkout@v4

      # 步驟 2: 設定 Python 環境
      - name: Set up Python 3.9
        uses: actions/setup-python@v5
        with:
          python-version: 3.9

      # 步驟 3: 安裝依賴套件
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # 步驟 4: 執行單元測試
      - name: Run unittests
        run: python -m unittest discover